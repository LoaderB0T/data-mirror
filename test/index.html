<input id="text1" type="text" />
<input id="text2" type="text" />

<script type="module">
  import { DataSync, DataSyncWindowStrategy, DataSyncBroadcastStrategy } from './test.js';

  const dataSync1 = new DataSync('awd', a => a).withStrategy(
    new DataSyncWindowStrategy(),
    new DataSyncBroadcastStrategy()
  );
  const dataSync2 = new DataSync('awd', a => a).withStrategy(
    new DataSyncWindowStrategy(),
    new DataSyncBroadcastStrategy()
  );

  const input1 = document.getElementById('text1');
  const input2 = document.getElementById('text2');
  input1.addEventListener('input', function (value) {
    dataSync1.update(value.target.value);
  });
  dataSync1.listenForChanges(value => {
    input1.value = value;
  });

  input2.addEventListener('input', function (value) {
    dataSync2.update(value.target.value);
  });
  dataSync2.listenForChanges(value => {
    input2.value = value;
  });
</script>
